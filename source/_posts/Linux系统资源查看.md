---
title: Linux系统资源查看
date: 2020-07-04 12:58:46
tags:
---
##### Linux中有许多系统资源需要监管，请问有哪些命令可以查看？

## 性能管理介绍
###### 操作系统对硬件资源统一管理，并把资源分配给各个APP使用，资源的使用情况直接影响到程序运行的速度，如果资源使用过高，甚至会造成服务器宕机，直接造成业务中断。

###### 实时掌控资源使用情况是每一个系统管理员必备的技能，可以及时发现潜在的问题并及时处理。
<!-- more -->
#### 硬件资源管理逻辑

1. 资源管理的命令
1. 阈值是多少
1. 如何定位问题
1. 如何解决

## CPU性能管理
###### 查看命令:ps top uptime

###### 检查项:进程总数、running队列、load值、使用率

- 1）总进程数-0业务进程数≈业务进程数

> 是
> 说明机器压力大，需要升级配置或者通过集群解决
> 不是
> 查看任务管理器中的进程，找是否有陌生进程，不认识的可以百度查询。
> 继续综合后续指标判断

- 2）running队列长度

> 预警线：单核不超过10个
> 
> 超过说明CPU资源不足，是否是业务造成的
> 
> 是：说明机器压力大，需要升级配置或者通过集群解决
> 不是：找到R队列中的进程，判断是否为恶意程序，恶意程序直接KILL掉，并清除相关连接

- 3）CPU-load值和使用率

> 两个是成正比的，使用率高，负载就高
> 
> 预警线:load average 接受范围 3-5【单个核 多核乘以N】,使用率80%
> 
> 重点看CPU使用率，单核使用率是100%,多核100*N%
> 
> 找到高消耗CPU的进程，判断是否为业务进程
> 
> 是      业务说明机器压力大，需要升级配置或者通过集群解决
> 不是   判断是否为恶意程序，恶意程序直接KILL掉，并清除相关连接


## 磁盘性能管理
###### 查看命令:df iostat iotop

###### 检查项：使用率 IO队列长度

- 1）使用率

> 磁盘使用率预警线: 80%
> 
> 超过80%应该加磁盘或者清理空间

- 2）IO队列长度

> 队列长度2-3
> 
> 检查哪个进程占用了IO，是否为恶意进程
> 
> 是:      找到进程Kill掉，清除对应文件
> 不是       优化IO，磁盘阵列或者上存储
> iostat命令

> 命令语法
> 
> iostat [options] [interval] [count]
> 
> 命令选项
> 
> -x 详细信息
> 
> -m 以M显示 默认块
> 
> -c 仅显示CPU统计信息.与-d选项互斥.
> 
> -d 仅显示磁盘统计信息.与-c选项互斥.
> 
> -k 以K为单位显示每秒的磁盘请求数,默认单位块.
> 
> -V 打印版本号和帮助信息.



## 网络性能管理

###### 查看命令:iftop

###### 检查项: 流入流出峰值

###### 阈值:总带宽的80%



## 内存性能管理

###### 查看命令：free

###### 查看项：物理/swap使用率

###### 阈值: 80%/5%

###### 内存使用进程:ps









